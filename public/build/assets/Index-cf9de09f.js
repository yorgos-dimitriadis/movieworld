import{Q as xe,h as M,o as k,f as _,b as d,t as D,e as F,d as P,u as I,N as we,k as Ie,l as Q,m as T,p as L,q as w,s as de,x as Se,y as $e,F as N,z as ce,A as j,B as ke,C as _e,a as S,w as A,r as Ee,g as C,D as fe,T as Me,c as K,n as W,E as oe,Z as Ae,j as Z,i as De,G as Te}from"./app-7ed9b9dc.js";import{_ as Pe,A as Ne}from"./ApplicationLogo-67e70494.js";import{_ as Fe}from"./Modal-a05e4ef3.js";import{_ as Ce,a as Oe,b as Le}from"./TextInput-24fe6fd0.js";const Re={class:"flex flex-col p-4 border rounded mb-4"},je={class:"text-xl font-bold"},Be={class:"flex justify-between items-end gap-4 mt-4"},Ue={class:"flex items-center gap-2"},Ve={class:"text-green-600"},He={class:"text-red-600"},Ke={class:"text-gray-500 text-sm"},We={class:"text-sm text-gray-600"},Ze={__name:"MovieCard",props:["movie"],emits:["selectedUserId"],setup(e,{emit:t}){const n=e,s=t,l=xe(),r=()=>{n.movie&&n.movie.user&&n.movie.user.id?s("selectedUserId",n.movie.user.id):console.error("Movie or user ID is not available")},o=M(()=>{if(!n.movie||!n.movie.created_at)return"";const f=new Date(n.movie.created_at);return isNaN(f.getTime())?"":f.toLocaleString("en-GB",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!1})}),u=f=>{if(l.props.auth.user&&l.props.auth.user.id===n.movie.user.id){alert("You cannot vote on your own movie.");return}if(f!=="like"&&f!=="hate"){console.error("Invalid vote type:",f);return}if(!l.props.auth.user){alert("You must be logged in to vote.");return}we.post(`/movies/${n.movie.id}/vote`,{type:f},{preserveScroll:!0})};return(f,p)=>(k(),_("div",Re,[d("div",null,[d("h2",je,D(e.movie.title),1),d("p",null,D(e.movie.description),1)]),d("div",Be,[d("div",Ue,[d("form",{onSubmit:p[0]||(p[0]=F(b=>u("like"),["prevent"]))},[d("button",Ve,"ðŸ‘ "+D(e.movie.likes),1)],32),d("form",{onSubmit:p[1]||(p[1]=F(b=>u("hate"),["prevent"]))},[d("button",He,"ðŸ‘Ž "+D(e.movie.hates),1)],32)]),d("div",Ke,[d("p",We,[p[2]||(p[2]=P(" Posted by ")),d("button",{class:"text-blue-600 hover:underline",onClick:F(r,["prevent"])},D(I(l).props.auth.user&&I(l).props.auth.user.id===e.movie.user.id?"you":e.movie.user.name),1),P(" on "+D(o.value),1)])])])]))}};var re;let ze=Symbol("headlessui.useid"),Ge=0;const X=(re=Ie)!=null?re:function(){return Q(ze,()=>`${++Ge}`)()};function x(e){var t;if(e==null||e.value==null)return null;let n=(t=e.value.$el)!=null?t:e.value;return n instanceof Node?n:null}function B(e,t,...n){if(e in t){let l=t[e];return typeof l=="function"?l(...n):l}let s=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(l=>`"${l}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,B),s}var qe=Object.defineProperty,Ye=(e,t,n)=>t in e?qe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,se=(e,t,n)=>(Ye(e,typeof t!="symbol"?t+"":t,n),n);let Qe=class{constructor(){se(this,"current",this.detect()),se(this,"currentId",0)}set(t){this.current!==t&&(this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}},J=new Qe;function ee(e){if(J.isServer)return null;if(e instanceof Node)return e.ownerDocument;if(e!=null&&e.hasOwnProperty("value")){let t=x(e);if(t)return t.ownerDocument}return document}let G=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var q=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(q||{}),Xe=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Xe||{}),Je=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(Je||{});function ve(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(G)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var te=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(te||{});function ne(e,t=0){var n;return e===((n=ee(e))==null?void 0:n.body)?!1:B(t,{0(){return e.matches(G)},1(){let s=e;for(;s!==null;){if(s.matches(G))return!0;s=s.parentElement}return!1}})}function me(e){let t=ee(e);T(()=>{t&&!ne(t.activeElement,0)&&tt(e)})}var et=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(et||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function tt(e){e==null||e.focus({preventScroll:!0})}let nt=["textarea","input"].join(",");function ot(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,nt))!=null?n:!1}function pe(e,t=n=>n){return e.slice().sort((n,s)=>{let l=t(n),r=t(s);if(l===null||r===null)return 0;let o=l.compareDocumentPosition(r);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function rt(e,t){return st(ve(),t,{relativeTo:e})}function st(e,t,{sorted:n=!0,relativeTo:s=null,skipElements:l=[]}={}){var r;let o=(r=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e==null?void 0:e.ownerDocument)!=null?r:document,u=Array.isArray(e)?n?pe(e):e:ve(e);l.length>0&&u.length>1&&(u=u.filter(c=>!l.includes(c))),s=s??o.activeElement;let f=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),p=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,u.indexOf(s))-1;if(t&4)return Math.max(0,u.indexOf(s))+1;if(t&8)return u.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),b=t&32?{preventScroll:!0}:{},m=0,a=u.length,v;do{if(m>=a||m+a<=0)return 0;let c=p+m;if(t&16)c=(c+a)%a;else{if(c<0)return 3;if(c>=a)return 1}v=u[c],v==null||v.focus(b),m+=f}while(v!==o.activeElement);return t&6&&ot(v)&&v.select(),2}function lt(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function at(){return/Android/gi.test(window.navigator.userAgent)}function it(){return lt()||at()}function R(e,t,n){J.isServer||L(s=>{document.addEventListener(e,t,n),s(()=>document.removeEventListener(e,t,n))})}function ut(e,t,n){J.isServer||L(s=>{window.addEventListener(e,t,n),s(()=>window.removeEventListener(e,t,n))})}function dt(e,t,n=M(()=>!0)){function s(r,o){if(!n.value||r.defaultPrevented)return;let u=o(r);if(u===null||!u.getRootNode().contains(u))return;let f=function p(b){return typeof b=="function"?p(b()):Array.isArray(b)||b instanceof Set?b:[b]}(e);for(let p of f){if(p===null)continue;let b=p instanceof HTMLElement?p:x(p);if(b!=null&&b.contains(u)||r.composed&&r.composedPath().includes(b))return}return!ne(u,te.Loose)&&u.tabIndex!==-1&&r.preventDefault(),t(r,u)}let l=w(null);R("pointerdown",r=>{var o,u;n.value&&(l.value=((u=(o=r.composedPath)==null?void 0:o.call(r))==null?void 0:u[0])||r.target)},!0),R("mousedown",r=>{var o,u;n.value&&(l.value=((u=(o=r.composedPath)==null?void 0:o.call(r))==null?void 0:u[0])||r.target)},!0),R("click",r=>{it()||l.value&&(s(r,()=>l.value),l.value=null)},!0),R("touchend",r=>s(r,()=>r.target instanceof HTMLElement?r.target:null),!0),ut("blur",r=>s(r,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function le(e,t){if(e)return e;let n=t??"button";if(typeof n=="string"&&n.toLowerCase()==="button")return"button"}function ct(e,t){let n=w(le(e.value.type,e.value.as));return de(()=>{n.value=le(e.value.type,e.value.as)}),L(()=>{var s;n.value||x(t)&&x(t)instanceof HTMLButtonElement&&!((s=x(t))!=null&&s.hasAttribute("type"))&&(n.value="button")}),n}function ae(e){return[e.screenX,e.screenY]}function ft(){let e=w([-1,-1]);return{wasMoved(t){let n=ae(t);return e.value[0]===n[0]&&e.value[1]===n[1]?!1:(e.value=n,!0)},update(t){e.value=ae(t)}}}function vt({container:e,accept:t,walk:n,enabled:s}){L(()=>{let l=e.value;if(!l||s!==void 0&&!s.value)return;let r=ee(e);if(!r)return;let o=Object.assign(f=>t(f),{acceptNode:t}),u=r.createTreeWalker(l,NodeFilter.SHOW_ELEMENT,o,!1);for(;u.nextNode();)n(u.currentNode)})}var Y=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Y||{}),mt=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(mt||{});function U({visible:e=!0,features:t=0,ourProps:n,theirProps:s,...l}){var r;let o=he(s,n),u=Object.assign(l,{props:o});if(e||t&2&&o.static)return z(u);if(t&1){let f=(r=o.unmount)==null||r?0:1;return B(f,{0(){return null},1(){return z({...l,props:{...o,hidden:!0,style:{display:"none"}}})}})}return z(u)}function z({props:e,attrs:t,slots:n,slot:s,name:l}){var r,o;let{as:u,...f}=pt(e,["unmount","static"]),p=(r=n.default)==null?void 0:r.call(n,s),b={};if(s){let m=!1,a=[];for(let[v,c]of Object.entries(s))typeof c=="boolean"&&(m=!0),c===!0&&a.push(v);m&&(b["data-headlessui-state"]=a.join(" "))}if(u==="template"){if(p=ge(p??[]),Object.keys(f).length>0||Object.keys(t).length>0){let[m,...a]=p??[];if(!gt(m)||a.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${l} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(f).concat(Object.keys(t)).map(g=>g.trim()).filter((g,h,i)=>i.indexOf(g)===h).sort((g,h)=>g.localeCompare(h)).map(g=>`  - ${g}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(g=>`  - ${g}`).join(`
`)].join(`
`));let v=he((o=m.props)!=null?o:{},f,b),c=Se(m,v,!0);for(let g in v)g.startsWith("on")&&(c.props||(c.props={}),c.props[g]=v[g]);return c}return Array.isArray(p)&&p.length===1?p[0]:p}return $e(u,Object.assign({},f,b),{default:()=>p})}function ge(e){return e.flatMap(t=>t.type===N?ge(t.children):[t])}function he(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let s of e)for(let l in s)l.startsWith("on")&&typeof s[l]=="function"?(n[l]!=null||(n[l]=[]),n[l].push(s[l])):t[l]=s[l];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(n).map(s=>[s,void 0])));for(let s in n)Object.assign(t,{[s](l,...r){let o=n[s];for(let u of o){if(l instanceof Event&&l.defaultPrevented)return;u(l,...r)}}});return t}function pt(e,t=[]){let n=Object.assign({},e);for(let s of t)s in n&&delete n[s];return n}function gt(e){return e==null?!1:typeof e.type=="string"||typeof e.type=="object"||typeof e.type=="function"}let be=Symbol("Context");var O=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(O||{});function ht(){return Q(be,null)}function bt(e){ce(be,e)}var $=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))($||{});function yt(e){throw new Error("Unexpected object: "+e)}var E=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(E||{});function xt(e,t){let n=t.resolveItems();if(n.length<=0)return null;let s=t.resolveActiveIndex(),l=s??-1;switch(e.focus){case 0:{for(let r=0;r<n.length;++r)if(!t.resolveDisabled(n[r],r,n))return r;return s}case 1:{l===-1&&(l=n.length);for(let r=l-1;r>=0;--r)if(!t.resolveDisabled(n[r],r,n))return r;return s}case 2:{for(let r=l+1;r<n.length;++r)if(!t.resolveDisabled(n[r],r,n))return r;return s}case 3:{for(let r=n.length-1;r>=0;--r)if(!t.resolveDisabled(n[r],r,n))return r;return s}case 4:{for(let r=0;r<n.length;++r)if(t.resolveId(n[r],r,n)===e.id)return r;return s}case 5:return null;default:yt(e)}}let ie=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function ue(e){var t,n;let s=(t=e.innerText)!=null?t:"",l=e.cloneNode(!0);if(!(l instanceof HTMLElement))return s;let r=!1;for(let u of l.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))u.remove(),r=!0;let o=r?(n=l.innerText)!=null?n:"":s;return ie.test(o)&&(o=o.replace(ie,"")),o}function wt(e){let t=e.getAttribute("aria-label");if(typeof t=="string")return t.trim();let n=e.getAttribute("aria-labelledby");if(n){let s=n.split(" ").map(l=>{let r=document.getElementById(l);if(r){let o=r.getAttribute("aria-label");return typeof o=="string"?o.trim():ue(r).trim()}return null}).filter(Boolean);if(s.length>0)return s.join(", ")}return ue(e).trim()}function It(e){let t=w(""),n=w("");return()=>{let s=x(e);if(!s)return"";let l=s.innerText;if(t.value===l)return n.value;let r=wt(s).trim().toLowerCase();return t.value=l,n.value=r,r}}var St=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(St||{}),$t=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))($t||{});function kt(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let ye=Symbol("MenuContext");function V(e){let t=Q(ye,null);if(t===null){let n=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,V),n}return t}let _t=j({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:t,attrs:n}){let s=w(1),l=w(null),r=w(null),o=w([]),u=w(""),f=w(null),p=w(1);function b(a=v=>v){let v=f.value!==null?o.value[f.value]:null,c=pe(a(o.value.slice()),h=>x(h.dataRef.domRef)),g=v?c.indexOf(v):null;return g===-1&&(g=null),{items:c,activeItemIndex:g}}let m={menuState:s,buttonRef:l,itemsRef:r,items:o,searchQuery:u,activeItemIndex:f,activationTrigger:p,closeMenu:()=>{s.value=1,f.value=null},openMenu:()=>s.value=0,goToItem(a,v,c){let g=b(),h=xt(a===E.Specific?{focus:E.Specific,id:v}:{focus:a},{resolveItems:()=>g.items,resolveActiveIndex:()=>g.activeItemIndex,resolveId:i=>i.id,resolveDisabled:i=>i.dataRef.disabled});u.value="",f.value=h,p.value=c??1,o.value=g.items},search(a){let v=u.value!==""?0:1;u.value+=a.toLowerCase();let c=(f.value!==null?o.value.slice(f.value+v).concat(o.value.slice(0,f.value+v)):o.value).find(h=>h.dataRef.textValue.startsWith(u.value)&&!h.dataRef.disabled),g=c?o.value.indexOf(c):-1;g===-1||g===f.value||(f.value=g,p.value=1)},clearSearch(){u.value=""},registerItem(a,v){let c=b(g=>[...g,{id:a,dataRef:v}]);o.value=c.items,f.value=c.activeItemIndex,p.value=1},unregisterItem(a){let v=b(c=>{let g=c.findIndex(h=>h.id===a);return g!==-1&&c.splice(g,1),c});o.value=v.items,f.value=v.activeItemIndex,p.value=1}};return dt([l,r],(a,v)=>{var c;m.closeMenu(),ne(v,te.Loose)||(a.preventDefault(),(c=x(l))==null||c.focus())},M(()=>s.value===0)),ce(ye,m),bt(M(()=>B(s.value,{0:O.Open,1:O.Closed}))),()=>{let a={open:s.value===0,close:m.closeMenu};return U({ourProps:{},theirProps:e,slot:a,slots:t,attrs:n,name:"Menu"})}}}),Et=j({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(e,{attrs:t,slots:n,expose:s}){var l;let r=(l=e.id)!=null?l:`headlessui-menu-button-${X()}`,o=V("MenuButton");s({el:o.buttonRef,$el:o.buttonRef});function u(m){switch(m.key){case $.Space:case $.Enter:case $.ArrowDown:m.preventDefault(),m.stopPropagation(),o.openMenu(),T(()=>{var a;(a=x(o.itemsRef))==null||a.focus({preventScroll:!0}),o.goToItem(E.First)});break;case $.ArrowUp:m.preventDefault(),m.stopPropagation(),o.openMenu(),T(()=>{var a;(a=x(o.itemsRef))==null||a.focus({preventScroll:!0}),o.goToItem(E.Last)});break}}function f(m){switch(m.key){case $.Space:m.preventDefault();break}}function p(m){e.disabled||(o.menuState.value===0?(o.closeMenu(),T(()=>{var a;return(a=x(o.buttonRef))==null?void 0:a.focus({preventScroll:!0})})):(m.preventDefault(),o.openMenu(),kt(()=>{var a;return(a=x(o.itemsRef))==null?void 0:a.focus({preventScroll:!0})})))}let b=ct(M(()=>({as:e.as,type:t.type})),o.buttonRef);return()=>{var m;let a={open:o.menuState.value===0},{...v}=e,c={ref:o.buttonRef,id:r,type:b.value,"aria-haspopup":"menu","aria-controls":(m=x(o.itemsRef))==null?void 0:m.id,"aria-expanded":o.menuState.value===0,onKeydown:u,onKeyup:f,onClick:p};return U({ourProps:c,theirProps:v,slot:a,attrs:t,slots:n,name:"MenuButton"})}}}),Mt=j({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(e,{attrs:t,slots:n,expose:s}){var l;let r=(l=e.id)!=null?l:`headlessui-menu-items-${X()}`,o=V("MenuItems"),u=w(null);s({el:o.itemsRef,$el:o.itemsRef}),vt({container:M(()=>x(o.itemsRef)),enabled:M(()=>o.menuState.value===0),accept(a){return a.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:a.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(a){a.setAttribute("role","none")}});function f(a){var v;switch(u.value&&clearTimeout(u.value),a.key){case $.Space:if(o.searchQuery.value!=="")return a.preventDefault(),a.stopPropagation(),o.search(a.key);case $.Enter:if(a.preventDefault(),a.stopPropagation(),o.activeItemIndex.value!==null){let c=o.items.value[o.activeItemIndex.value];(v=x(c.dataRef.domRef))==null||v.click()}o.closeMenu(),me(x(o.buttonRef));break;case $.ArrowDown:return a.preventDefault(),a.stopPropagation(),o.goToItem(E.Next);case $.ArrowUp:return a.preventDefault(),a.stopPropagation(),o.goToItem(E.Previous);case $.Home:case $.PageUp:return a.preventDefault(),a.stopPropagation(),o.goToItem(E.First);case $.End:case $.PageDown:return a.preventDefault(),a.stopPropagation(),o.goToItem(E.Last);case $.Escape:a.preventDefault(),a.stopPropagation(),o.closeMenu(),T(()=>{var c;return(c=x(o.buttonRef))==null?void 0:c.focus({preventScroll:!0})});break;case $.Tab:a.preventDefault(),a.stopPropagation(),o.closeMenu(),T(()=>rt(x(o.buttonRef),a.shiftKey?q.Previous:q.Next));break;default:a.key.length===1&&(o.search(a.key),u.value=setTimeout(()=>o.clearSearch(),350));break}}function p(a){switch(a.key){case $.Space:a.preventDefault();break}}let b=ht(),m=M(()=>b!==null?(b.value&O.Open)===O.Open:o.menuState.value===0);return()=>{var a,v;let c={open:o.menuState.value===0},{...g}=e,h={"aria-activedescendant":o.activeItemIndex.value===null||(a=o.items.value[o.activeItemIndex.value])==null?void 0:a.id,"aria-labelledby":(v=x(o.buttonRef))==null?void 0:v.id,id:r,onKeydown:f,onKeyup:p,role:"menu",tabIndex:0,ref:o.itemsRef};return U({ourProps:h,theirProps:g,slot:c,attrs:t,slots:n,features:Y.RenderStrategy|Y.Static,visible:m.value,name:"MenuItems"})}}}),At=j({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(e,{slots:t,attrs:n,expose:s}){var l;let r=(l=e.id)!=null?l:`headlessui-menu-item-${X()}`,o=V("MenuItem"),u=w(null);s({el:u,$el:u});let f=M(()=>o.activeItemIndex.value!==null?o.items.value[o.activeItemIndex.value].id===r:!1),p=It(u),b=M(()=>({disabled:e.disabled,get textValue(){return p()},domRef:u}));de(()=>o.registerItem(r,b)),ke(()=>o.unregisterItem(r)),L(()=>{o.menuState.value===0&&f.value&&o.activationTrigger.value!==0&&T(()=>{var i,y;return(y=(i=x(u))==null?void 0:i.scrollIntoView)==null?void 0:y.call(i,{block:"nearest"})})});function m(i){if(e.disabled)return i.preventDefault();o.closeMenu(),me(x(o.buttonRef))}function a(){if(e.disabled)return o.goToItem(E.Nothing);o.goToItem(E.Specific,r)}let v=ft();function c(i){v.update(i)}function g(i){v.wasMoved(i)&&(e.disabled||f.value||o.goToItem(E.Specific,r,0))}function h(i){v.wasMoved(i)&&(e.disabled||f.value&&o.goToItem(E.Nothing))}return()=>{let{disabled:i,...y}=e,H={active:f.value,disabled:i,close:o.closeMenu};return U({ourProps:{id:r,ref:u,role:"menuitem",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,onClick:m,onFocus:a,onPointerenter:c,onMouseenter:c,onPointermove:g,onMousemove:g,onPointerleave:h,onMouseleave:h},theirProps:{...n,...y},slot:H,attrs:n,slots:t,name:"MenuItem"})}}});function Dt(e,t){return k(),_("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[d("path",{"fill-rule":"evenodd",d:"M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd"})])}function Tt(e,t){return k(),_("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[d("path",{"fill-rule":"evenodd",d:"M4.25 2A2.25 2.25 0 0 0 2 4.25v2.5A2.25 2.25 0 0 0 4.25 9h2.5A2.25 2.25 0 0 0 9 6.75v-2.5A2.25 2.25 0 0 0 6.75 2h-2.5Zm0 9A2.25 2.25 0 0 0 2 13.25v2.5A2.25 2.25 0 0 0 4.25 18h2.5A2.25 2.25 0 0 0 9 15.75v-2.5A2.25 2.25 0 0 0 6.75 11h-2.5Zm9-9A2.25 2.25 0 0 0 11 4.25v2.5A2.25 2.25 0 0 0 13.25 9h2.5A2.25 2.25 0 0 0 18 6.75v-2.5A2.25 2.25 0 0 0 15.75 2h-2.5Zm0 9A2.25 2.25 0 0 0 11 13.25v2.5A2.25 2.25 0 0 0 13.25 18h2.5A2.25 2.25 0 0 0 18 15.75v-2.5A2.25 2.25 0 0 0 15.75 11h-2.5Z","clip-rule":"evenodd"})])}function Pt(e,t){return k(),_("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[d("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"})])}function Nt(e,t){return k(),_("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}const Ft={"aria-live":"assertive",class:"pointer-events-none fixed inset-0 flex items-end px-4 py-6 sm:items-start sm:p-6"},Ct={class:"flex w-full flex-col items-center space-y-4 sm:items-end"},Ot={key:0,class:"pointer-events-auto w-full max-w-sm overflow-hidden rounded-lg bg-white shadow-lg ring-1 ring-black/5"},Lt={class:"p-4"},Rt={class:"flex items-start"},jt={class:"shrink-0"},Bt={class:"ml-3 w-0 flex-1 pt-0.5"},Ut={class:"ml-4 flex shrink-0"},Vt={__name:"SuccessNotification",props:{show:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:t}){const n=e,s=t;return _e(()=>n.show,l=>{l&&setTimeout(()=>{s("close")},3e3)}),(l,r)=>(k(),_("div",Ft,[d("div",Ct,[S(fe,{"enter-active-class":"transform ease-out duration-300 transition","enter-from-class":"translate-y-2 opacity-0 sm:translate-y-0 sm:translate-x-2","enter-to-class":"translate-y-0 opacity-100 sm:translate-x-0","leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:A(()=>[e.show?(k(),_("div",Ot,[d("div",Lt,[d("div",Rt,[d("div",jt,[S(I(Nt),{class:"size-6 text-green-400","aria-hidden":"true"})]),d("div",Bt,[e.show?Ee(l.$slots,"default",{key:0}):C("",!0)]),d("div",Ut,[d("button",{type:"button",onClick:r[0]||(r[0]=o=>s("close")),class:"inline-flex rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},[r[1]||(r[1]=d("span",{class:"sr-only"},"Close",-1)),S(I(Pt),{class:"size-5","aria-hidden":"true"})])])])])])):C("",!0)]),_:3})])]))}};const Ht={class:"relative sm:flex sm:justify-center sm:items-center min-h-screen bg-dots-darker bg-center bg-gray-100 selection:bg-red-500 selection:text-white"},Kt={key:0,class:"sm:fixed sm:top-0 sm:right-0 p-6 text-right"},Wt={class:"p-6 lg:p-8"},Zt={class:"flex justify-center"},zt={class:"mt-16"},Gt={class:"bg-white"},qt={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},Yt={class:"flex items-baseline justify-between border-b border-gray-200 pb-6 pt-8"},Qt={class:"flex items-center"},Xt={class:"py-1"},Jt=["href","onClick"],en={"aria-labelledby":"movies-heading",class:"pb-24 pt-6"},tn={class:"font-bold"},nn={class:"p-6"},on={class:"space-y-12"},rn={class:"border-b border-gray-900/10 pb-12"},sn={class:"mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6"},ln={class:"col-span-full"},an={class:"col-span-full"},un={class:"mt-2"},dn={class:"mt-6 flex items-center justify-end gap-x-6"},cn={__name:"Index",props:{canLogin:Boolean,canRegister:Boolean,movies:Array|Object},setup(e){const t=w(!1),n=w(!1),s=e,l=[{name:"Date",href:"#"},{name:"Likes",href:"#"},{name:"Hates",href:"#"}],r=w(null),o=w(l[0].name.toLowerCase()),u=w(null),f=M(()=>{if(!s.movies.data)return[];let h=[...s.movies.data];return u.value?(console.log("Filtering movies for user ID:",u.value),h.filter(i=>i.user.id===u.value)):o.value==="likes"?h.sort((i,y)=>y.likes-i.likes):o.value==="hates"?h.sort((i,y)=>y.hates-i.hates):o.value==="date"?h.sort((i,y)=>new Date(y.created_at)-new Date(i.created_at)):h}),p=w(!0),b=M(()=>p.value?"lg:grid-cols-2":"grid-cols-1"),m=Me({title:"",description:""});function a(){m.post(route("movies.store"),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{v(),n.value=!0},onError:h=>{console.error("Failed to add movie:",h),r.value.focus()}})}const v=()=>{t.value=!1,m.title="",m.description="",m.errors={},m.reset()},c=()=>{n.value=!1},g=h=>{u.value=h,console.log("Selected user ID:",h)};return(h,i)=>(k(),_(N,null,[S(I(Ae),{title:"Welcome"}),d("div",Ht,[e.canLogin?(k(),_("div",Kt,[h.$page.props.auth.user?(k(),K(I(Z),{key:0,href:h.route("dashboard"),class:"font-semibold text-gray-600 hover:text-gray-900 focus:outline focus:outline-2 focus:rounded-sm focus:outline-red-500"},{default:A(()=>[P("Welcome Back "+D(h.$page.props.auth.user.name),1)]),_:1},8,["href"])):(k(),_(N,{key:1},[S(I(Z),{href:h.route("login"),class:"font-semibold text-gray-600 hover:text-gray-900 focus:outline focus:outline-2 focus:rounded-sm focus:outline-red-500"},{default:A(()=>i[8]||(i[8]=[P("Log in")])),_:1,__:[8]},8,["href"]),e.canRegister?(k(),K(I(Z),{key:0,href:h.route("register"),class:"ml-4 font-semibold text-gray-600 hover:text-gray-900 focus:outline focus:outline-2 focus:rounded-sm focus:outline-red-500"},{default:A(()=>i[9]||(i[9]=[P("Register")])),_:1,__:[9]},8,["href"])):C("",!0)],64))])):C("",!0),d("div",Wt,[d("div",Zt,[S(Ne,{class:"w-36 h-auto"})]),d("div",zt,[d("div",Gt,[d("div",null,[d("main",qt,[d("div",Yt,[i[12]||(i[12]=d("h1",{class:"text-4xl font-bold tracking-tight text-gray-900"},"Movies",-1)),d("div",Qt,[S(I(_t),{as:"div",class:"relative inline-block text-left"},{default:A(()=>[d("div",null,[S(I(Et),{class:"group inline-flex justify-center text-sm font-medium text-gray-700 hover:text-gray-900"},{default:A(()=>[i[10]||(i[10]=P(" Sort by ")),S(I(Dt),{class:"-mr-1 ml-1 size-5 shrink-0 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"})]),_:1,__:[10]})]),S(fe,{"enter-active-class":"transition ease-out duration-100","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:A(()=>[S(I(Mt),{class:"absolute right-0 z-10 mt-2 w-40 origin-top-right rounded-md bg-white shadow-2xl ring-1 ring-black/5 focus:outline-none"},{default:A(()=>[d("div",Xt,[(k(),_(N,null,oe(l,y=>S(I(At),{key:y.name},{default:A(({active:H})=>[d("a",{href:y.href,class:W([y.name.toLowerCase()==o.value?"font-medium text-gray-900":"text-gray-500",H?"bg-gray-100 outline-none":"","block px-4 py-2 text-sm"]),onClick:F(fn=>o.value=y.name.toLowerCase(),["prevent"])},D(y.name),11,Jt)]),_:2},1024)),64))])]),_:1})]),_:1})]),_:1}),d("button",{type:"button",class:"-m-2 ml-5 p-2 text-gray-400 hover:text-gray-500 sm:ml-7 hidden lg:block",onClick:i[0]||(i[0]=y=>p.value=!p.value)},[i[11]||(i[11]=d("span",{class:"sr-only"},"View grid",-1)),S(I(Tt),{class:"size-5","aria-hidden":"true"})])])]),d("section",en,[i[18]||(i[18]=d("h2",{id:"products-heading",class:"sr-only"},"Movies",-1)),d("div",{class:W(["grid grid-cols-1 gap-6 w-full",b.value])},[d("div",{class:W(["flex justify-between items-center",p.value?"lg:col-span-2":"col-span-1"])},[d("strong",tn,"Found "+D(f.value.length)+" movies",1),d("a",{href:"#",class:"text-sm text-gray-500 hover:text-gray-900",onClick:i[1]||(i[1]=F(y=>u.value=null,["prevent"]))},"Clear Filter"),h.$page.props.auth.user?(k(),_("button",{key:0,type:"button",class:"rounded-md bg-indigo-50 px-3 py-2 text-sm font-semibold text-indigo-600 shadow-sm hover:bg-indigo-100",onClick:i[2]||(i[2]=y=>t.value=!0)},"New Movie")):C("",!0)],2),S(Fe,{show:t.value,onClose:i[7]||(i[7]=y=>v())},{default:A(()=>[d("div",nn,[d("div",on,[d("div",rn,[i[15]||(i[15]=d("h2",{class:"text-base/7 font-semibold text-gray-900"},"Add New Moview",-1)),i[16]||(i[16]=d("p",{class:"mt-1 text-sm/6 text-gray-600"},"This information will be displayed publicly so be careful what you share.",-1)),d("div",sn,[d("div",ln,[S(Ce,{for:"title",value:"Title"}),S(Oe,{id:"title",ref_key:"titleInput",ref:r,modelValue:I(m).title,"onUpdate:modelValue":i[3]||(i[3]=y=>I(m).title=y),type:"text",class:"mt-2 w-full"},null,8,["modelValue"]),S(Le,{message:I(m).errors.title,class:"mt-2"},null,8,["message"])]),d("div",an,[i[13]||(i[13]=d("label",{for:"description",class:"block text-sm/6 font-medium text-gray-900"},"Description",-1)),d("div",un,[De(d("textarea",{name:"description",id:"description","onUpdate:modelValue":i[4]||(i[4]=y=>I(m).description=y),rows:"3",class:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6"},null,512),[[Te,I(m).description]])]),i[14]||(i[14]=d("p",{class:"mt-3 text-sm/6 text-gray-600"},"Write a few sentences about movie.",-1))])])])]),d("div",dn,[d("button",{type:"button",class:"text-sm/6 font-semibold text-gray-900",onClick:i[5]||(i[5]=y=>v())},"Cancel"),d("button",{type:"button",class:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",onClick:i[6]||(i[6]=y=>a())},"Save")])])]),_:1},8,["show"]),S(Vt,{show:n.value,onClose:c},{default:A(()=>i[17]||(i[17]=[d("p",{class:"text-sm font-medium text-gray-900"},"Successfully saved!",-1),d("p",{class:"mt-1 text-sm text-gray-500"},"You can now see it in the list.",-1)])),_:1,__:[17]},8,["show"]),(k(!0),_(N,null,oe(f.value,y=>(k(),K(Ze,{key:y.id,movie:y,onSelectedUserId:g},null,8,["movie"]))),128))],2)])])])])])])])],64))}},bn=Pe(cn,[["__scopeId","data-v-84d16bd3"]]);export{bn as default};
